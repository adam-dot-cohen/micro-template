<!-- TODO: make a component for this sub-header, since Angular Material doesn't seem to have one yet. [jay_mclain] -->
<mat-card class="page-sub-header mat-elevation-z4">
  <button mat-icon-button class="back-button" [routerLink]="['/partners', configuration.id, 'detail']"><mat-icon>arrow_back</mat-icon></button>
  <mat-card-header>
    <mat-card-title>{{configuration.name}}</mat-card-title>
    <mat-card-subtitle>Configuration</mat-card-subtitle>
  </mat-card-header>
</mat-card>

<mat-table [dataSource]="configuration.settings">
  <ng-container matColumnDef="category">
    <mat-header-cell *matHeaderCellDef>Category</mat-header-cell>
    <mat-cell *matCellDef="let setting">{{setting.category}}</mat-cell>
  </ng-container>
  <ng-container matColumnDef="name">
    <mat-header-cell *matHeaderCellDef>Name</mat-header-cell>
    <mat-cell *matCellDef="let setting">{{setting.name}}</mat-cell>
  </ng-container>
  <ng-container matColumnDef="value">
    <mat-header-cell *matHeaderCellDef>Value</mat-header-cell>
    <mat-cell *matCellDef="let setting">
      <span *ngIf="setting.value == undefined"><strong>(Unknown)</strong></span>
      <span *ngIf="!setting.isVisible && setting.isSensitive && setting.value != undefined">***********</span>
      <span *ngIf="(setting.isVisible || !setting.isSensitive) && setting.value != undefined">{{setting.value}}</span>
      <span *ngIf="setting.isSensitive"><button mat-icon-button (mousedown)="showSettingValue(setting)" (mouseup)="hideSettingValue(setting)"><mat-icon>visibility</mat-icon></button></span>
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
</mat-table>
